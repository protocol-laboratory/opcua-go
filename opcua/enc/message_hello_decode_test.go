package enc

import (
	"bytes"
	"github.com/stretchr/testify/require"
	"testing"
)

func TestDecodeHelloMessage(t *testing.T) {
	bs := []byte{0x48, 0x45, 0x4c, 0x46, 0x3e, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xff, 0xff, 0x0, 0x0, 0xff, 0xff, 0x0, 0x0, 0x0, 0x0, 0x20, 0x0, 0x40, 0x0, 0x0, 0x0, 0x1e, 0x0, 0x0, 0x0, 0x6f, 0x70, 0x63, 0x2e, 0x74, 0x63, 0x70, 0x3a, 0x2f, 0x2f, 0x6c, 0x6f, 0x63, 0x61, 0x6c, 0x68, 0x6f, 0x73, 0x74, 0x3a, 0x31, 0x32, 0x36, 0x38, 0x36, 0x2f, 0x6d, 0x69, 0x6c, 0x6f}
	decoder := NewDefaultDecoder(bytes.NewBuffer(bs), 10240)
	msg, err := decoder.ReadMsg()
	require.NoError(t, err)
	require.NotNil(t, msg)
}
